<html>
    <head>
        <title>Hack Spots</title>
        <meta charset='utf-8'>
        <script type="text/javascript" src='js/jquery.js '></script>
        <script type="text/javascript" src='js/tabletop1.3.4.js'></script>
        <script type="text/javascript" src='js/sheetsee.js'></script>
        <link rel="shortcut icon" href="https://raw.github.com/jlord/hack-spots/master/favico.png"/>

        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic'>
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Amatic+SC:400,700'>
        <link media="screen" rel="stylesheet" type="text/css" href="css/style.css">
        <link media="screen" rel="stylesheet" type="text/css" href="css/site.css">
        <link rel="stylesheet" href="css/MarkerCluster.css" />
        <link rel="stylesheet" href="css/MarkerCluster.Default.css" />
    </head>
<body>
    <div id="wrapper">
        <h1>Hack Spots</h1>
        <div>
            <ul class="nav">
                <li><strong>The collected favorites of those who hack</strong></li>
                <li><a href="#info">INFO</a> -</li>
                <li><a href="http://jlord.github.com/sheetsee.js" target="_blank">POWERED BY SHEETSEE.JS</a> -</li>
                <li><a href="http://www.github.com/jlord/hack-spots" target="_blank">GITHUB</a> -</li>
                <li><a href="http://www.twitter.com/jllord" target="_blank">@JLLORD</a></li>
            </ul>
        </div>
        <div class="container">
            <div id="rightSide">
                <div id="latestSpot"></div>
                <div id="selectedSpot"></div>
            </div>
            <div id="map"></div>
        </div>
        <div class="container">
            <input id="tableFilter" type="text" placeholder="filter by.."></input>
            <span class="clear button">Clear</span> <span class="resetMap button">Reset Map</span>
            <span class="noMatches">no matches</span>
            <div id="hackSpotsTable"></div>
        </div>
        <div id="info" class="container">
            <h3>Contribute!</h3>
            <div id="theNumberofSpots"></div>
            <p>This website is hooked up to <a href="https://docs.google.com/spreadsheets/d/1hnfQcggYcBYimuO_UOMvwoOi_I9vUvFpkMt4wjrrpLE/edit?usp=sharing" target="_blank">this Google Spreadsheet</a>, which I've shared, so click and add your favorite hack spots to the bottom of the list! For the map you'll need to <strong>get the lat and long</strong> of the spot, you can get that <a href="http://www.latlong.net/" target="_blank">here</a>. The locating of these places is helpful, so please try to fill out all the columns.</p>

            <h3>Info</h3>
            <p>When I'm visiting a new city I'd like to know which coffee shops have the best vibes, great coffee and are good for hunkering down and having a good hack. Yelp will tell you where the Starbucks is and Foursquare will tell you where your friend's have <em>been</em> - but did they like it and was it a grab in go place or a hack place? Plus, what about the people I don't follow on Foursquare or who can't check-in when in other countries?</p>

            <p>Besides being a list I've wanted to have, it's a fantastic (or I think so) way of using <a href="http://jlord.github.io/sheetsee.js" target="_blank">sheetsee.js</a>, which is a little JavaScript library I've been working on. Sheetsee.js helps you hook a Google Spreadsheet (awesome for data and collaboration!) to a website to make data more visual (maps, tables, charts).</p>

            <h3>Fork-n-Go</h3>
            <p>This is a work-in-progress example of a fork-n-go project - which means, there is just a <a href="https://github.com/jlord/hack-spots" target="_blank">gh-pages branch in GitHub</a> for this project so when you fork it, you've got a live and hosted website instantly. BAM! Just copy the spreadsheet headers and create your own spreadsheet, swap out the spreadsheet key in index.html and commit those changes. BAM! You've got a live and hosted site with a spreadsheet you control. More on the <a href="http://www.github.com/jlord/hack-spots" target="_blank">readme</a>.</p>
        </div>
    </div><!-- end wrapper -->

    <script id="hackSpotsTable" type="text/html">
        <table>
	   <tr><th>Timestamp</th><th>I understand that the information I submit will be available to the general public.</th><th>My survey code =    name of pet (or animal name) + my birth month       [ex: LEMUR 4]</th><th>•MY GENETICS•    My ability to taste is:</th><th>•MY GENETICS•     My ability to digest dairy products (lactose) is:</th><th>•MY BODY•       My current skin temperature on my index finger is:</th><th>•MY BODY•       My current skin temperature on my earlobe is:</th><th>•MY BODY•      My current heart rate is:</th><th>•MY BEHAVIOR•      The # of hours of sleep I had last night was:</th><th>•MY BEHAVIOR•      The # of steps I've taken today is:</th><th>•MY BEHAVIOR•      The # hours I've spent sitting down today is:</th<</tr>
            {{#rows}}
                <tr id="{{rowNumber}}" class="spotRow"><td>{{•MY BODY•       My current skin temperature on my index finger is:}}</td><td>{{•MY BEHAVIOR•      The # of steps I've taken today is:}}</td></tr>
            {{/rows}}
        </table>
    </script>

    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            var gData
            var URL = "1Ss7T8tyO7jSAg7HCyy9ji4_LM8CVV8mMTxWgNZ7nQtw"
                Tabletop.init({ key: URL, callback: showInfo, simpleSheet: true })
        })

        // so long, so messy
        function showInfo(gData) {
            tableOptions = {
                "data": gData,
                "tableDiv": "#hackSpotsTable",
                "filterDiv": "#tableFilter"
            }
            // make the table, and the search bar
            Sheetsee.makeTable(tableOptions)
            Sheetsee.initiateTableFilter(tableOptions)
            // so that the first map and info that loads
            // is complete and doesn't show rows that are
            // actively being edited by folk
            function findLatestCompleteSpot(data) {
                var latestCompleteSpot = []
                var startWithLatestRow = data.reverse()
                startWithLatestRow.forEach(function(row){
                    if (!row.lat || !row.long || !row.name || !row.address || !row.city || !row.state ) return
                    else latestCompleteSpot.push(row)
                })
                return latestCompleteSpot[0]
            }

            if(window.location.hash) {
                $('#tableFilter').val(window.location.hash.substring(1)).keyup()
                $('.spotRow').first().click()
            }
        }

    </script>
</body>
</html>
